{% extends "base.html" %}
{% block title %}Complete Appointment{% endblock %}

{% block content %}
<h4>Complete Appointment</h4>
<div class="card mb-3">
  <div class="card-body">
    <p><strong>Patient:</strong> {{ appointment.patient.user.full_name or appointment.patient.user.username }}</p>
    <p><strong>Start:</strong> {{ appointment.start_datetime }}</p>

    <form method="post" action="{{ url_for('main.complete_appointment', appointment_id=appointment.id) }}">
      <div class="mb-3">
        <label class="form-label">Diagnosis</label>
        <textarea class="form-control" name="diagnosis" rows="3" required></textarea>
      </div>
      <div class="mb-3">
        <label class="form-label">Prescription</label>
        <textarea class="form-control" name="prescription" rows="2"></textarea>
      </div>

      <div class="d-flex gap-2">
        <button class="btn btn-primary" type="submit">Save & Complete</button>
        <a class="btn btn-secondary" href="{{ url_for('main.doctor_dashboard') }}">Cancel</a>
      </div>
    </form>
  </div>
</div>
{% endblock %}
